<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    <title>QA401 Web</title>
  </head>

  <body>
    <nav class="navbar navbar-expand-sm navbar-dark bg-dark p-2 mb-2">
      <h1 class="text-white m-0">QA401 Web</h1>

      <div class="mr-auto"></div>

      <div class="mt-auto mb-auto">
        <button id="acquireBtn" type="button" class="btn btn-secondary mr-2">Single acquire</button>
        <button id="runBtn" type="button" class="btn btn-success">Run</button>
        <button id="stopBtn" type="button" class="btn btn-danger">Stop</button>
      </div>
    </nav>

    <div class="container-fluid">
      <div class="row">

        <!-- Right column -->
        <div class="col-3 order-2">
          <div>
            <h2>Status</h2>
            <p>
              Version: <span id="statusVersion"></span><br/>
              Connection: <span id="statusConnection"></span>
            </p>
            <button id="refreshBtn" type="button" class="btn btn-secondary">Refresh</button>
          </div>

          <hr/>

          <div>
            <h2>Acquire</h2>

            <div>
              <label for="bufferSizeSelect" class="col-form-label">Buffer size:</label>
              <select name="bufferSizeSelect" id="bufferSizeSelect">
                <option value="2048">2048</option>
                <option value="4096">4096</option>
                <option value="8192">8192</option>
                <option value="16384">16384</option>
                <option value="32768" selected>32768</option>
                <option value="65536">65536</option>
                <option value="131072">131072</option>
                <option value="262144">262144</option>
              </select>
              <button id="bufferSizeBtn" type="button" class="btn btn-secondary">Set</button>
            </div>

            <div>
              Attenuator:
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="attenuatorChoice" id="attenuatorOff" value="6">
                <label class="form-check-label" for="attenuatorOff">+6 dBV</label>
              </div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="attenuatorChoice" id="attenuatorOn" value="26" checked>
                <label class="form-check-label" for="attenuatorOn">+26 dBV</label>
              </div>
              <button id="attenuatorBtn" type="button" class="btn btn-secondary">Set</button>
            </div>

            <div class="pt-1 pb-1">
              <div class="form-check-inline">
                <input class="form-check-input" type="checkbox" name="audioGen1Check" id="audioGen1Check">
                <label class="form-check-label" for="audioGen1Check">Audio generator 1</label>
              </div>
              <div>
                <label for="audioGen1Frequency">Frequency (Hz):</label> <input type="number" id="audioGen1Frequency" value="1000" min="1" max="96000"/>
                <label for="audioGen1Amplitude">Amplitude (dBV):</label> <input type="number" id="audioGen1Amplitude" value="0" min="-120" max="6"/>
                <button id="audioGen1Btn" type="button" class="btn btn-secondary">Set</button>
              </div>
            </div>

            <div class="pt-1 pb-1">
              <div class="form-check-inline">
                <input class="form-check-input" type="checkbox" name="audioGen2Check" id="audioGen2Check">
                <label class="form-check-label" for="audioGen2Check">Audio generator 2</label>
              </div>
              <div>
                <label for="audioGen2Frequency">Frequency (Hz):</label> <input type="number" id="audioGen2Frequency" value="4500" min="1" max="96000"/>
                <label for="audioGen2Amplitude">Amplitude (dBV):</label> <input type="number" id="audioGen2Amplitude" value="-80" min="-120" max="6"/>
                <button id="audioGen2Btn" type="button" class="btn btn-secondary">Set</button>
              </div>
            </div>

            <div>
              <label for="windowTypeSelect" class="col-form-label">Window type:</label>
              <select name="windowTypeSelect" id="windowTypeSelect">
                <option value="Rectangle">Rectangle</option>
                <option value="Bartlett">Bartlett</option>
                <option value="Hamming">Hamming</option>
                <option value="Hann" selected>Hann</option>
                <option value="FlatTop">FlatTop</option>
                <option value="Kaiser7">Kaiser7</option>
              </select>
              <button id="windowTypeBtn" type="button" class="btn btn-secondary">Set</button>
            </div>

            <div class="pt-1 pb-1">
              Sample rate:
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="sampleRateChoice" id="sampleRate48" value="48000" checked>
                <label class="form-check-label" for="sampleRate48">48 KHz</label>
              </div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="sampleRateChoice" id="sampleRate192" value="192000">
                <label class="form-check-label" for="sampleRate192">192 KHz</label>
              </div>
              <div class="d-inline-block">
                <button id="sampleRateBtn" type="button" class="btn btn-secondary">Set</button>
              </div>
            </div>

            <div>
              <div class="form-check-inline">
                <input class="form-check-input" type="checkbox" name="roundFrequenciesCheck" id="roundFrequenciesCheck" checked>
                <label class="form-check-label" for="roundFrequenciesCheck">Round frequencies</label>
              </div>
              <button id="roundFrequenciesBtn" type="button" class="btn btn-secondary">Set</button>
            </div>

            <div class="pt-1 pb-1">
              Graph:
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="graphChoice" id="graphFrequency" value="frequency" checked>
                <label class="form-check-label" for="graphFrequency">Frequency</label>
              </div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="graphChoice" id="graphTime" value="time">
                <label class="form-check-label" for="graphTime">Time</label>
              </div>
              <div class="d-inline-block">
                <button id="graphBtn" type="button" class="btn btn-secondary">Show</button>
                <button id="resetZoomBtn" type="button" class="btn btn-secondary">Reset zoom</button>
              </div>
            </div>

            <div class="pt-1 pb-1">
              Channel:
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="channelChoice" id="channelLeft" value="left" checked>
                <label class="form-check-label" for="channelLeft">Left</label>
              </div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="channelChoice" id="channelRight" value="right">
                <label class="form-check-label" for="channelRight">Right</label>
              </div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="channelChoice" id="channelBoth" value="both">
                <label class="form-check-label" for="channelBoth">Both</label>
              </div>
              <div class="d-inline-block">
                <button id="channelBtn" type="button" class="btn btn-secondary">Show</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Left column -->
        <div class="col-9 order-1">
          <div>
            <table class="table">
              <thead>
                <tr>
                  <th>Metric</th>
                  <th>Left</th>
                  <th>Right</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td class="font-weight-bold">THD</td>
                  <td><span id="thdLeft"></span> dB / <span id="thdPctLeft"></span>%</td>
                  <td><span id="thdRight"></span> dB / <span id="thdPctRight"></span>%</td>
                </tr>
                <tr>
                  <td class="font-weight-bold">THD+N</td>
                  <td><span id="thdnLeft"></span> dB / <span id="thdnPctLeft"></span>%</td>
                  <td><span id="thdnRight"></span> dB / <span id="thdnPctRight"></span>%</td>
                </tr>
                <tr>
                  <td class="font-weight-bold">RMS</td>
                  <td><span id="rmsLeft"></span> dBV</td>
                  <td><span id="rmsRight"></span> dBV</td>
                </tr>
                <tr>
                  <td class="font-weight-bold">Peak</td>
                  <td><span id="peakLeft"></span> dBV</td>
                  <td><span id="peakRight"></span> dBV</td>
                </tr>
                <tr>
                  <td class="font-weight-bold">Phase</td>
                  <td><span id="phaseDegreeLeft"></span> deg / <span id="phaseSecondLeft"></span> sec</td>
                  <td><span id="phaseDegreeRight"></span> deg / <span id="phaseSecondRight"></span> sec</td>
                </tr>
                <!--              <tr>-->
                <!--                <td></td>-->
                <!--                <td><img id="acquireLeftImg" src=""/></td>-->
                <!--                <td><img id="acquireRightImg" src=""/></td>-->
                <!--              </tr>-->
                <tr>
                  <td colspan="3">
                    <canvas id="frequencyChart" style="background-color: black;"></canvas>
                    <canvas id="timeChart" class="d-none" style="background-color: black;"></canvas>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

      </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/hammerjs@2.0.8"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@0.7.7"></script>
    <script src="js/charts.js"></script>
    <script src="js/qa401.js"></script>
  </body>
</html>
